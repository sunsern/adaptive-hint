<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>

<h1>SockJS Client::Teacher</h1>

<div>
<button type="button" id="list_students">'list_students'</button>
<button type="button" id="send_hint">'send_hint'</button>
<button type="button" id="render_hint">'render_hint'</button>
</div>

<div>
<textarea id="textarea" rows="10" cols="80"></textarea>
</div>

<script>
    function append_msg(msg) {
	var textbox = $("#textarea");
	textbox.val(textbox.val() + msg + "\n");
    }

    $(document).ready(function() {
	sock = new SockJS('http://127.0.0.1:4350/teacher');
	sock.onopen = function() {
	    append_msg("connected");
	};
	sock.onmessage = function(e) {
	    append_msg("server message: " + e.data);
	};
	sock.onclose = function() {
	    append_msg("disconnected");
	};
	
	$("#list_students").click(function() {
	    sock.send(JSON.stringify({"command" : "list_students", 
				      "arguments" : {}}));
            append_msg("sent 'list_students'");
	});

	$("#send_hint").click(function() {
	    sock.send(JSON.stringify({"command" : "send_hint", 
				      "arguments" : {}}));
            append_msg("sent 'send_hint'");
	});
	
	$("#render_hint").click(function() {
	    sock.send(JSON.stringify({"command" : "render_hint", 
				      "arguments" : {}}));
            append_msg("sent 'render_hint'");
	});
	
	append_msg("document loaded");
	
    });  
</script>

</body>
</html>
